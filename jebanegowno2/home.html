<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>mObywatel 2.0 </title>
  <link rel="shortcut icon" href="../images/coi_common_ui_ic_mobywatel_logo.svg" type="image/x-icon">
  <meta name="theme-color" content="#F5F6FB">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="manifest" href="../manifest.json">

  <!-- zachowane lokalne skrypty -->
  <script defer src="../jebanegowno2/assets/bar.js"></script>
  <script defer src="../jebanegowno2/assets/manifest.js"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f6f8fb;
      --surface: #ffffff;
      --muted: #6f7380;
      --accent: #0b66c3;
      --accent-2: #235fae;
      --shadow-1: 0 6px 20px rgba(10,18,40,0.08);
      --radius-1: 18px;
      --radius-2: 26px;
      --glass: rgba(255,255,255,0.6);
      --text: #0f1720;
      --nav-h: 82px;
      --safe-bottom: env(safe-area-inset-bottom, 12px);
      --transition: 220ms cubic-bezier(.2,.9,.2,1);
      font-synthesis: none;
    }

    /* Dark mode vars */
    @media (prefers-color-scheme: dark){
      :root:not(.force-light){
        --bg: #0b0b0d;
        --surface: #0f1113;
        --muted: #b8bac0;
        --accent: #4ea3ff;
        --accent-2: #2b86ff;
        --shadow-1: 0 10px 30px rgba(0,0,0,0.55);
        --text: #e8eaf0;
      }
    }
    /* explicit class toggle */
    body.dark-mode {
      --bg: #0b0b0d;
      --surface: #0f1113;
      --muted: #b8bac0;
      --accent: #4ea3ff;
      --accent-2: #2b86ff;
      --shadow-1: 0 10px 30px rgba(0,0,0,0.55);
      --text: #e8eaf0;
    }

    /* base */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;padding:0;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,"Helvetica Neue",Arial}
    img{display:block;max-width:100%;height:auto;pointer-events:none}
    button{font-family:inherit}

    /* app shell */
    .app{min-height:100vh;display:flex;flex-direction:column;padding-bottom:calc(var(--nav-h) + var(--safe-bottom));transition:background var(--transition)}
    header.app-header{
      position:sticky;top:0;z-index:40;
      padding:18px 16px;
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;
      background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(0,0,0,0.04);
    }

    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:40px;height:40px;border-radius:10px;object-fit:cover}
    .brand .title{font-weight:700;font-size:18px;line-height:1}
    .brand .subtitle{font-size:12px;color:var(--muted)}

    .header-actions{display:flex;align-items:center;gap:10px}
    .header-actions .icon-btn{width:44px;height:44px;border-radius:12px;background:var(--surface);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow-1);cursor:pointer;border:0;transition:transform var(--transition)}
    .header-actions .icon-btn:active{transform:translateY(1px)}

    /* main */
    main.container{padding:18px 16px 24px;flex:1;overflow:auto}
    .hero-card{
      background:linear-gradient(180deg, var(--surface), color-mix(in srgb, var(--surface) 88%, transparent));
      border-radius:var(--radius-2);
      padding:18px;
      display:flex;
      gap:16px;
      align-items:center;
      box-shadow:var(--shadow-1);
      transition:transform var(--transition), box-shadow var(--transition);
    }
    .hero-card:hover{transform:translateY(-4px)}
    .hero-info h1{margin:0;font-size:20px;font-weight:800}
    .hero-info p{margin:6px 0 0;color:var(--muted);font-size:14px}

    .hero-actions{margin-left:auto;display:flex;gap:10px;align-items:center}
    .primary-btn{
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
      color:white;border:0;padding:11px 14px;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:0 8px 24px rgba(11,102,195,0.18);
      transition:transform var(--transition);
    }
    .primary-btn:active{transform:translateY(1px)}

    /* content sections */
    .section{margin-top:16px}
    .section-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
    .section-head h3{margin:0;font-size:15px;font-weight:700}
    .section-head .small{font-size:13px;color:var(--muted)}

    /* grid of cards */
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .grid .doc{
      background:linear-gradient(180deg,var(--surface), color-mix(in srgb,var(--surface) 92%, transparent));
      border-radius:16px;padding:12px;display:flex;flex-direction:column;gap:8px;cursor:pointer;box-shadow:0 8px 20px rgba(6,10,18,0.04);transition:transform var(--transition), box-shadow var(--transition);
    }
    .grid .doc:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(6,10,18,0.08)}
    .doc .title{font-weight:800;font-size:14px}
    .doc small{color:var(--muted);font-size:12px}

    /* services row (large tiles) */
    .services{display:flex;gap:12px;align-items:stretch}
    .services .service{
      flex:1;background:var(--surface);border-radius:18px;padding:16px;text-align:center;box-shadow:var(--shadow-1);cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;transition:transform var(--transition);
    }
    .service:active{transform:translateY(1px)}
    .service img{height:38px}

    /* bottom nav v5 */
    nav.bottom-nav{
      position:fixed;left:12px;right:12px;bottom:12px;height:var(--nav-h);background:linear-gradient(180deg,var(--surface), color-mix(in srgb,var(--surface) 96%, transparent));border-radius:26px;display:flex;align-items:center;justify-content:space-around;padding:8px 18px;box-shadow:0 20px 48px rgba(6,10,18,0.12);z-index:80;
    }
    .bn-item{display:flex;flex-direction:column;align-items:center;gap:6px;cursor:pointer;color:var(--muted);font-size:12px}
    .bn-item.active{color:var(--accent);font-weight:700}
    .bn-item img{height:20px;filter: none;opacity:0.98}

    /* modal sheet */
    .modal{position:fixed;inset:0;display:none;align-items:flex-end;justify-content:center;background:linear-gradient(rgba(6,6,8,0.4),rgba(6,6,8,0.45));z-index:130}
    .modal.show{display:flex}
    .sheet{width:100%;max-width:760px;border-radius:22px 22px 12px 12px;padding:18px;background:var(--surface);box-shadow:0 30px 80px rgba(6,10,18,0.5);transform:translateY(20px);animation:sheetIn 260ms var(--transition) both}
    @keyframes sheetIn{from{opacity:0;transform:translateY(40px)} to{opacity:1;transform:translateY(0)}}
    .sheet .handle{width:44px;height:5px;background:linear-gradient(90deg,rgba(0,0,0,0.08),rgba(0,0,0,0.03));border-radius:999px;margin:6px auto}
    .id-card{display:flex;gap:14px;align-items:center}
    .id-avatar{width:82px;height:82px;border-radius:18px;background:linear-gradient(135deg,#e8f6ff,#dfefff);display:flex;align-items:center;justify-content:center;font-weight:900;color:var(--accent);font-size:24px}
    .id-meta h3{margin:0;font-weight:800}
    .id-meta p{margin:6px 0 0;color:var(--muted);font-size:13px}

    /* helpers */
    .muted{color:var(--muted)}
    .row{display:flex;gap:12px;align-items:center}

    /* responsive tweaks */
    @media (max-width:900px){
      .grid{grid-template-columns:repeat(2,1fr)}
      .services{flex-direction:row}
    }
    @media (max-width:520px){
      header.app-header{padding:14px}
      .grid{grid-template-columns:repeat(2,1fr)}
      .hero-card{flex-direction:column;align-items:flex-start;padding:14px}
      .id-avatar{width:64px;height:64px}
      nav.bottom-nav{left:8px;right:8px;border-radius:20px;height:76px}
    }
  </style>
</head>
<body>
  <div class="app" id="appRoot">

    <header class="app-header" role="banner">
      <div class="brand">
        <img src="../images/coi_common_ui_ic_mobywatel_logo.svg" alt="mObywatel logo">
        <div>
          <div class="title">mObywatel</div>
          <div class="subtitle">Wersja demo • v5.0</div>
        </div>
      </div>

      <div class="header-actions" role="toolbar" aria-label="Akcje nagłówka">
        <button class="icon-btn" id="themeToggle" title="Tryb (ciemny/jasny)"><img src="../images/ab010_more.svg" alt="theme" width="18"></button>
        <button class="icon-btn" onclick="sendTo('profile')" title="Profil"><img src="../images/ad005_framed_person.svg" alt="profile" width="18"></button>
        <button class="icon-btn" onclick="sendTo('notifications')" title="Powiadomienia"><img src="../images/ab013_notifications.svg" alt="notif" width="18"></button>
      </div>
    </header>

    <main class="container" role="main">
      <section class="hero-card" aria-labelledby="heroTitle">
        <div class="hero-info">
          <h1 id="heroTitle">Pulpit</h1>
          <p>Wybierz dokument lub usługę. Ta wersja to oficjalny styl mObywatel v5 — gotowa do użycia w materiałach filmowych.</p>
          <div style="margin-top:10px" class="row">
            <button class="primary-btn" onclick="openModal()">Pokaż mDowód</button>
            <button class="primary-btn" style="background:transparent;color:var(--accent);box-shadow:none;border:1px solid rgba(11,102,195,0.12)" onclick="sendTo('add')">Dodaj dokument</button>
          </div>
        </div>
        <div style="min-width:120px;display:flex;align-items:center;justify-content:center">
          <img src="../images/CHANGE_IT_home_mid_card.svg" alt="preview" style="width:96px;height:auto;border-radius:12px;box-shadow:0 10px 30px rgba(11,102,195,0.06)">
        </div>
      </section>

      <section class="section">
        <div class="section-head">
          <h3>Dokumenty</h3>
          <div class="small muted">Szybki dostęp — dotknij, aby otworzyć</div>
        </div>

        <div class="grid" role="list">
          <div class="doc" role="listitem" onclick="sendTo('mDowod')" tabindex="0">
            <img src="../images/coi_common_ui_ic_document_id.svg" alt="" style="height:28px">
            <div class="title">mDowód</div>
            <small class="muted">Dowód osobisty — elektronicznie</small>
          </div>

          <div class="doc" role="listitem" onclick="sendTo('prawo-jazdy')" tabindex="0">
            <img src="../images/ic_car.svg" alt="" style="height:28px">
            <div class="title">Prawo jazdy</div>
            <small class="muted">Uprawnienia kierowcy</small>
          </div>

          <div class="doc" role="listitem" onclick="sendTo('ubezp')" tabindex="0">
            <img src="../images/ic_insurance.svg" alt="" style="height:28px">
            <div class="title">Ubezpieczenie</div>
            <small class="muted">Polisy i informacje</small>
          </div>

          <div class="doc" role="listitem" onclick="sendTo('karta-zdrowia')" tabindex="0">
            <img src="../images/ic_health.svg" alt="" style="height:28px">
            <div class="title">Karta zdrowia</div>
            <small class="muted">Informacje medyczne</small>
          </div>

          <div class="doc" role="listitem" onclick="sendTo('tax')" tabindex="0">
            <img src="../images/ic_taxes.svg" alt="" style="height:28px">
            <div class="title">Podatki</div>
            <small class="muted">Twoje rozliczenia</small>
          </div>

          <div class="doc" role="listitem" onclick="sendTo('invoices')" tabindex="0">
            <img src="../images/ic_docs.svg" alt="" style="height:28px">
            <div class="title">Faktury</div>
            <small class="muted">Dokumenty finansowe</small>
          </div>
        </div>
      </section>

      <section class="section">
        <div class="section-head">
          <h3>Usługi</h3>
          <div class="small muted">Dostępne dla ciebie</div>
        </div>

        <div class="services" role="list">
          <div class="service" role="listitem" onclick="sendTo('bezpieczenstwo')">
            <img src="../images/da035_bezpiecznie_w_sieci.svg" alt="">
            <div class="muted">Bezpiecznie w sieci</div>
          </div>

          <div class="service" role="listitem" onclick="sendTo('historia-pojazdu')">
            <img src="../images/auto.png" alt="">
            <div class="muted">Historia pojazdu</div>
          </div>

          <div class="service" role="listitem" onclick="sendTo('zastrzez-pesel')">
            <img src="../images/da008_zastrzez_pesel.svg" alt="">
            <div class="muted">Zastrzeż PESEL</div>
          </div>
        </div>
      </section>

    </main>

    <!-- bottom navigation -->
    <nav class="bottom-nav" role="navigation" aria-label="Główna nawigacja">
      <div class="bn-item active" onclick="sendTo('home')">
        <img src="../images/b001_home.svg" alt=""><div>Start</div>
      </div>
      <div class="bn-item" onclick="sendTo('documents')">
        <img src="../images/ad005_framed_person.svg" alt=""><div>Dokumenty</div>
      </div>
      <div class="bn-item" onclick="sendTo('services')">
        <img src="../images/ac001_services.svg" alt=""><div>Usługi</div>
      </div>
      <div class="bn-item" onclick="sendTo('qr')">
        <img src="../images/ai001_scanner_qr.svg" alt=""><div>Kod QR</div>
      </div>
      <div class="bn-item" onclick="sendTo('more')">
        <img src="../images/ab010_more.svg" alt=""><div>Więcej</div>
      </div>
    </nav>

    <!-- modal sheet with mDowod preview -->
    <div id="modal" class="modal" onclick="closeModal(event)" aria-hidden="true">
      <div class="sheet" role="dialog" aria-modal="true" aria-label="Podgląd mDowodu" onclick="event.stopPropagation()">
        <div class="handle" aria-hidden="true"></div>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <div style="font-weight:800;font-size:16px">mDowód</div>
          <div style="font-size:13px;color:var(--muted)">Wersja: 5.0 (film)</div>
        </div>

        <div class="id-card">
          <div class="id-avatar">PL</div>
          <div class="id-meta">
            <h3>Jan Kowalski</h3>
            <p class="muted">PESEL: 85010112345 · Dowód wydany: 2020-10-01</p>
          </div>
          <div style="text-align:right">
            <img src="../images/ic_arrow_forward_Dgray.svg" alt="więcej" width="22">
          </div>
        </div>

        <div style="margin-top:12px;color:var(--muted);font-size:13px">Ekran demonstracyjny — nie używaj jako prawdziwego dokumentu.</div>
      </div>
    </div>

  </div>

  <script>
    /* navigation & modal - zostawione wg Twojej logiki */
    function sendTo(page){
      switch(page){
        case 'documents': location.href = './documents.html'; break;
        case 'services': location.href = './services.html'; break;
        case 'qr': location.href = './qr.html'; break;
        case 'more': location.href = './more.html'; break;
        case 'card': location.href = './card.html'; break;
        case 'mDowod': openModal(); break;
        case 'add': alert('Funkcja dodawania dokumentu — demo'); break;
        case 'home': location.href = './index.html'; break;
        default: console.log('navigate to:', page);
      }
    }

    function openModal(){ document.getElementById('modal').classList.add('show'); document.getElementById('modal').setAttribute('aria-hidden','false'); }
    function closeModal(e){ if(e && e.target && e.target.id === 'modal'){ document.getElementById('modal').classList.remove('show'); document.getElementById('modal').setAttribute('aria-hidden','true'); } }
    document.addEventListener('keydown',function(e){ if(e.key==='Escape'){ document.getElementById('modal').classList.remove('show'); document.getElementById('modal').setAttribute('aria-hidden','true'); } });

    /* Dark mode toggle & persistence */
    (function(){
      const root = document.documentElement;
      const body = document.body;
      const btn = document.getElementById('themeToggle');

      // apply saved pref
      const saved = localStorage.getItem('moby-theme');
      if(saved === 'dark'){ body.classList.add('dark-mode'); }
      else if(saved === 'light'){ body.classList.remove('dark-mode'); }

      // auto-detect if nothing saved
      if(!saved){
        const sysDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if(sysDark) body.classList.add('dark-mode');
      }

      // toggle handler
      btn.addEventListener('click', function(){
        const isDark = body.classList.toggle('dark-mode');
        localStorage.setItem('moby-theme', isDark ? 'dark' : 'light');
        // small feedback
        btn.animate([{transform:'scale(0.95)'},{transform:'scale(1)'}],{duration:160});
      });
    })();
  </script>
</body>
</html>
