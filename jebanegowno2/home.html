<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>mObywatel 2.0 </title>
<link rel="shortcut icon" href="../images/coi_common_ui_ic_mobywatel_logo.svg" type="image/x-icon">
<meta name="theme-color" content="#F5F6FB">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="manifest" href="../manifest.json">

<script defer src="../jebanegowno2/assets/bar.js"></script>
<script defer src="../jebanegowno2/assets/manifest.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #F5F6FB;
  --card: #fff;
  --muted: #7b7c81;
  --accent: #064792;
  --radius: 14px;
  --shadow: 0 8px 24px rgba(17,24,39,0.06);
  --safe-area: env(safe-area-inset-bottom, 12px);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0;padding:0;background:var(--bg);font-family:Inter, Roboto, system-ui, -apple-system, "Segoe UI", sans-serif;color:#121212}
img{display:block;max-width:100%;height:auto;pointer-events:none}

/* App shell */
.app{min-height:100vh;display:flex;flex-direction:column;padding-bottom:calc(96px + var(--safe-area));}
header.app-header{position:sticky;top:0;background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));backdrop-filter:blur(6px);z-index:40;padding:18px 16px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 1px 0 rgba(0,0,0,0.04)}
header .brand{display:flex;align-items:center;gap:12px}
header .brand img{width:36px;height:36px}
header .actions{display:flex;gap:10px;align-items:center}
header .chip{background:#e8f0ff;color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px}

/* Main container */
main.container{padding:20px 16px 28px;flex:1}

/* Cards */
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin-bottom:16px}
.hero{display:flex;gap:16px;align-items:center}
.hero .hero-info{flex:1}
.hero h1{margin:0;font-size:1.1rem}
.hero p{margin:6px 0 0;color:var(--muted);font-size:0.95rem}

/* Documents grid */
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:14px}
.doc{background:linear-gradient(180deg,#fff,#fbfdff);border-radius:12px;padding:12px;display:flex;flex-direction:column;gap:8px;align-items:flex-start;cursor:pointer}
.doc .title{font-weight:700}
.doc small{color:var(--muted)}

/* Services */
.services{display:flex;gap:12px;margin-top:8px}
.service{flex:1;background:var(--card);border-radius:12px;padding:12px;text-align:center;box-shadow:var(--shadow);cursor:pointer}
.service img{height:36px;margin-bottom:8px}
.service p{margin:0;color:var(--muted);font-size:13px}

/* Bottom navigation */
.bottom-nav{position:fixed;left:12px;right:12px;bottom:12px;height:74px;background:linear-gradient(180deg, #ffffff, #fbfdff);border-radius:18px;display:flex;align-items:center;justify-content:space-between;padding:10px 14px;box-shadow:0 18px 40px rgba(10,20,40,0.08);z-index:80}
.bn-tab{flex:1;text-align:center;font-size:12px;color:var(--muted);cursor:pointer}
.bn-tab.active{color:var(--accent);font-weight:700}
.bn-tab img{height:22px;margin-bottom:4px}

/* Modal / mDowod */
.modal{position:fixed;inset:0;background:rgba(10,12,16,0.4);display:none;align-items:flex-end;justify-content:center;padding:20px;z-index:120}
.modal.show{display:flex}
.sheet{width:100%;max-width:720px;border-radius:16px;background:var(--card);padding:18px 16px 24px;box-shadow:0 24px 60px rgba(10,14,22,0.2)}
.sheet .handle{width:40px;height:4px;background:#e6e7ee;border-radius:999px;margin:0 auto 10px}
.id-card{display:flex;gap:12px;align-items:center}
.id-avatar{width:72px;height:72px;border-radius:12px;background:linear-gradient(135deg,#dfefff,#e6f7ff);display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--accent);font-size:20px}
.id-meta{flex:1}
.id-meta h3{margin:0;font-size:1rem}
.id-meta p{margin:6px 0 0;color:var(--muted);font-size:13px}

/* Actor edit panel */
.actor-panel{margin-top:12px;background:#f0f3ff;padding:12px;border-radius:12px}
.actor-panel input{width:100%;padding:6px 8px;margin:6px 0;border-radius:8px;border:1px solid #d6d6d6}
.actor-panel button{background:var(--accent);color:#fff;padding:8px 12px;border:none;border-radius:8px;cursor:pointer;font-weight:600;margin-top:6px}

/* responsive tweaks */
@media (max-width:600px){
  .grid{grid-template-columns:repeat(2,1fr)}
  .hero h1{font-size:1rem}
  .id-avatar{width:56px;height:56px;font-size:18px}
}
</style>
</head>

<body>
<div class="app">
<header class="app-header">
  <div class="brand">
    <img src="../images/coi_common_ui_ic_mobywatel_logo.svg" alt="mObywatel">
    <div>
      <div style="font-weight:700">mObywatel</div>
      <div style="font-size:12px;color:var(--muted)">Wersja demo • v4</div>
    </div>
  </div>
  <div class="actions">
    <div class="chip">Profil</div>
    <img src="../images/ab013_notifications.svg" alt="notif" width="22" height="22">
  </div>
</header>

<main class="container">
<section class="card hero">
  <div class="hero-info">
    <h1>Pulpit</h1>
    <p>Wybierz dokument lub usługę. Panel w wersji 4 z możliwością edycji danych przez aktorów.</p>
  </div>
  <div style="min-width:110px;text-align:right">
    <button onclick="openModal()" style="background:var(--accent);color:#fff;border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer">Pokaż mDowód</button>
  </div>
</section>

<section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-weight:700">Dokumenty</div>
    <div style="display:flex;gap:8px">
      <div class="chip" style="background:#fff;border:1px solid #eef3ff;color:var(--accent);cursor:pointer" onclick="sendTo('add')">Dodaj</div>
      <div class="chip" onclick="sendTo('documents')">Wszystkie</div>
    </div>
  </div>

  <div class="grid">
    <div class="doc" onclick="sendTo('mDowod')">
      <img src="../images/coi_common_ui_ic_document_id.svg" alt="id" style="height:26px">
      <div class="title">mDowód</div>
      <small>Dowód osobisty w wersji elektronicznej</small>
    </div>
    <div class="doc" onclick="sendTo('prawo-jazdy')">
      <img src="../images/ic_car.svg" alt="car" style="height:26px">
      <div class="title">Prawo jazdy</div>
      <small>Uprawnienia kierowcy</small>
    </div>
    <div class="doc" onclick="sendTo('ubezp')">
      <img src="../images/ic_insurance.svg" alt="ins" style="height:26px">
      <div class="title">Ubezpieczenie</div>
      <small>Polisy i informacje</small>
    </div>
  </div>
</section>

<section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
    <div style="font-weight:700">Usługi</div>
    <div class="chip" onclick="sendTo('services')">Wszystkie</div>
  </div>
  <div class="services">
    <div class="service" onclick="location.reload()">
      <img src="../images/da035_bezpiecznie_w_sieci.svg" alt="net">
      <p>Bezpiecznie w sieci</p>
    </div>
    <div class="service" onclick="location.reload()">
      <img src="../images/auto.png" alt="auto">
      <p>Historia pojazdu</p>
    </div>
    <div class="service" onclick="location.reload()">
      <img src="../images/da008_zastrzez_pesel.svg" alt="pesel">
      <p>Zastrzeż PESEL</p>
    </div>
  </div>
</section>

</main>

<nav class="bottom-nav" role="navigation" aria-label="Główne"> 
  <div class="bn-tab active" onclick="sendTo('home')">
    <img src="../images/b001_home.svg" alt="home">
    <div>Pulpit</div>
  </div>
  <div class="bn-tab" onclick="sendTo('documents')">
    <img src="../images/ad005_framed_person.svg" alt="docs">
    <div>Dok.</div>
  </div>
  <div class="bn-tab" onclick="sendTo('services')">
    <img src="../images/ac001_services.svg" alt="serv">
    <div>Usługi</div>
  </div>
  <div class="bn-tab" onclick="sendTo('qr')">
    <img src="../images/ai001_scanner_qr.svg" alt="qr">
    <div>Kod QR</div>
  </div>
  <div class="bn-tab" onclick="sendTo('more')">
    <img src="../images/ab010_more.svg" alt="more">
    <div>Więcej</div>
  </div>
</nav>

<!-- Modal mDowód + panel aktora -->
<div id="modal" class="modal" onclick="closeModal(event)">
  <div class="sheet" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
    <div class="handle"></div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div style="font-weight:700">mDowód</div>
      <div style="font-size:12px;color:var(--muted)">Wersja: 4.0 (demo)</div>
    </div>
    <div class="id-card">
      <div class="id-avatar">PL</div>
      <div class="id-meta">
        <h3 id="actor-name">Jan Kowalski</h3>
        <p id="actor-pesel">PESEL: 85010112345 · Dowód wydany: 2020-10-01</p>
      </div>
      <div style="text-align:right">
        <img src="../images/ic_arrow_forward_Dgray.svg" alt="go" width="22">
      </div>
    </div>
    <div class="actor-panel">
      <input type="text" id="edit-name" placeholder="Imię i nazwisko">
      <input type="text" id="edit-pesel" placeholder="PESEL">
      <button onclick="saveActorData()">Zapisz zmiany</button>
    </div>
    <div style="margin-top:12px;color:var(--muted);font-size:13px">
      Ten ekran to demo - nie używaj materiału jako prawdziwego dokumentu.
    </div>
  </div>
</div>

</div>

<script>
function sendTo(page){
  switch(page){
    case 'documents': location.href = './documents.html'; break;
    case 'services': location.href = './services.html'; break;
    case 'qr': location.href = './qr.html'; break;
    case 'more': location.href = './more.html'; break;
    case 'card': location.href = './card.html'; break;
    case 'mDowod': openModal(); break;
    case 'add': alert('Funkcja dodawania dokumentu — demo'); break;
    default: console.log('navigate to:', page);
  }
}

function openModal(){ document.getElementById('modal').classList.add('show'); }
function closeModal(e){ if(e && e.target && e.target.id==='modal') document.getElementById('modal').classList.remove('show'); }

// Actor panel logic
function saveActorData(){
  const name = document.getElementById('edit-name').value;
  const pesel = document.getElementById('edit-pesel').value;
  if(name) document.getElementById('actor-name').textContent = name;
  if(pesel) document.getElementById('actor-pesel').textContent = 'PESEL: '+pesel+' · Dowód wydany: 2020-10-01';
}

// Accessibility
document.addEventListener('keydown',function(e){if(e.key==='Escape') closeModal({target:{id:'modal'}});});
</script>

</body>
</html>
